{% extends "base.html" %}
{% block content %}
<h1>Construction Budgets</h1>
<form id="filter-form" hx-get="/construction_budgets" hx-target="#construction-budgets-table" hx-swap="innerHTML" style="margin-bottom:1em;">
  <input type="text" name="budget_period" placeholder="Budget Period"/>
  <input type="text" name="fund_code" placeholder="Fund Code"/>
  <input type="text" name="program_code" placeholder="Program Code"/>
  <input type="text" name="project_id" placeholder="Project ID"/>
  <input type="text" name="activity_id" placeholder="Activity ID"/>
  <input type="text" name="line_descr" placeholder="Line Description"/>
  <input type="number" step="0.01" name="monetary_amount" placeholder="Amount"/>
  <button type="submit">Filter</button>
  <button type="button" hx-get="/construction_budgets" hx-target="#construction-budgets-table" hx-swap="innerHTML">Clear</button>
</form>
<form id="create-form" hx-post="/construction_budgets" hx-target="#construction-budgets-table" hx-swap="beforeend">
  <input type="text" name="budget_period" placeholder="Budget Period" required/>
  <input type="text" name="fund_code" placeholder="Fund Code" required/>
  <input type="text" name="program_code" placeholder="Program Code" required/>
  <input type="text" name="project_id" placeholder="Project ID" required/>
  <input type="text" name="activity_id" placeholder="Activity ID" required/>
  <input type="text" name="line_descr" placeholder="Line Description"/>
  <input type="number" step="0.01" name="monetary_amount" placeholder="Amount" required/>
  <button type="submit">Add</button>
</form>

<button type="button" hx-get="/construction_budgets/bulk_upload" hx-target="#construction-bulk-upload-container" hx-swap="innerHTML">Bulk Upload</button>
<div id="construction-bulk-upload-container"></div>
<div id="construction-bulk-preview-container"></div>
<table border="1">
  <thead>
    <tr>
      <th>Period</th><th>Fund</th><th>Program</th><th>Project</th><th>Activity</th><th>Line</th><th>Amount</th><th>Actions</th>
    </tr>
  </thead>
  <tbody id="construction-budgets-table">
    {% for budget in construction_budgets %}
      {% include "construction_budget_row.html" %}
    {% endfor %}
  </tbody>
</table>
{% endblock %}
